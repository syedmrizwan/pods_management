//package main
//
//import (
//	"os"
//	"fmt"
//	"github.com/gin-contrib/cors"
//	"github.com/gin-gonic/gin"
//	ginSwagger "github.com/swaggo/gin-swagger"
//	"github.com/syedmrizwan/pods_management/api"
//	"github.com/syedmrizwan/pods_management/model"
//	swaggerFiles "github.com/swaggo/files" // swagger embed files
//	//_ "github.com/syedmrizwan/pods_management/docs" // docs is generated by Swag CLI, you have to import it.
//	//"github.com/syedmrizwan/pods_management/model"
//)
//
//// @title Pods Management
//// @version 1.0
//// @description Pods Management Blueprint.
//
//// @contact.name API Support
//// @contact.email syedmrizwan@outlook.com
//
//func main() {
//	testBufferedChannel()
//
//	r := gin.New()
//
//	r.Use(cors.Default())
//
//	r.GET("/swagger/*any", ginSwagger.WrapHandler(swaggerFiles.Handler))
//	// Route Paths
//	api.RegisterRoutes(r.Group("/api/v1"))
//
//	err := r.Run(":8080") // listen and serve on 0.0.0.0:8080
//
//	if err != nil {
//		os.Exit(1)
//	}
//
//}
//func testBufferedChannel() {
//	inProgressPods := []model.PodConfiguration{
//		{PodID: int64(1), PodName: "a", Status: "in"},
//		{PodID: int64(2), PodName: "b", Status: "out"},
//		{PodID: int64(3), PodName: "c", Status: "in"},
//	}
//
//	fmt.Println(inProgressPods)
//
//	taskStatusChan := make(chan *model.PodConfiguration, len(inProgressPods))
//	for index, pod := range inProgressPods {
//		go func(i int, p model.PodConfiguration) {
//			if i == 0 {
//				taskStatusChan <- nil
//			} else {
//				taskStatusChan <- &p
//			}
//
//		}(index, pod)
//	}
//
//	for i := 0; i < len(inProgressPods); i++ {
//		podConfig := <-taskStatusChan
//		fmt.Println(podConfig)
//	}
//
//}

package main

import (
	"fmt"

	"encoding/json"
	"github.com/go-redis/redis"
)

type Author struct {
	Name string `json:"name"`
	Age  int    `json:"age"`
}

func main() {
	client := redis.NewClient(&redis.Options{
		Addr:     "localhost:6379",
		Password: "",
		DB:       0,
	})

	json, err := json.Marshal(Author{Name: "Elliot", Age: 25})
	if err != nil {
		fmt.Println(err)
	}

	err = client.Set("id1234", json, 0).Err()
	if err != nil {
		fmt.Println(err)
	}
	val, err := client.Get("id1234").Result()
	if err != nil {
		fmt.Println(err)
	}
	fmt.Println(val)
}
